## Содержание

1. [Аутентификация](#аутентификация)
2. [Пользователи](#пользователи)
3. [Истории](#истории)
4. [Главы](#главы)
5. [Социальные взаимодействия](#социальные-взаимодействия)

## Аутентификация

### Регистрация пользователя

Регистрация нового пользователя и получение токена доступа.

- **URL:** `/register`
- **Метод:** `POST`
- **Тело запроса:**
  ```json
  {
    "email": "user@example.com",
    "password": "сильныйпароль",
    "full_name": "Иван Иванов",
    "pseudonym": "ИванПисатель",
    "bio": "Я люблю писать истории",
    "avatar_url": "https://example.com/avatar.jpg",
    "role": "READER"
  }
  ```
- **Ответ:**
  ```json
  {
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "token_type": "bearer"
  }
  ```

### Вход

Аутентификация пользователя и получение токена доступа.

- **URL:** `/token`
- **Метод:** `POST`
- **Тело запроса (form-data):**
  - `username`: user@example.com
  - `password`: сильныйпароль
- **Ответ:**
  ```json
  {
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "token_type": "bearer"
  }
  ```

## Пользователи

### Получение информации о текущем пользователе

Получение информации о текущем аутентифицированном пользователе.

- **URL:** `/users/me`
- **Метод:** `GET`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Ответ:**
  ```json
  {
    "id": 1,
    "email": "user@example.com",
    "full_name": "Иван Иванов",
    "pseudonym": "ИванПисатель",
    "bio": "Я люблю писать истории",
    "avatar_url": "https://example.com/avatar.jpg",
    "role": "READER",
    "created_at": "2023-05-20T12:00:00Z",
    "updated_at": "2023-05-20T12:00:00Z"
  }
  ```

### Обновление информации о текущем пользователе

Обновление информации для текущего аутентифицированного пользователя.

- **URL:** `/users/me`
- **Метод:** `PUT`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Тело запроса:**
  ```json
  {
    "full_name": "Иван Петров",
    "pseudonym": "ИванАвтор",
    "bio": "Я профессиональный писатель",
    "avatar_url": "https://example.com/new_avatar.jpg"
  }
  ```
- **Ответ:** Обновленная информация о пользователе

### Получение профиля пользователя

Получение публичной информации о профиле пользователя.

- **URL:** `/users/profile/{user_id}`
- **Метод:** `GET`
- **Ответ:**
  ```json
  {
    "id": 1,
    "email": "user@example.com",
    "full_name": "Иван Иванов",
    "pseudonym": "ИванПисатель",
    "bio": "Я люблю писать истории",
    "avatar_url": "https://example.com/avatar.jpg",
    "role": "READER",
    "created_at": "2023-05-20T12:00:00Z",
    "updated_at": "2023-05-20T12:00:00Z",
    "followers_count": 10,
    "following_count": 5,
    "stories_count": 3
  }
  ```

### Получение списка авторов

Получение списка пользователей с ролью автора.

- **URL:** `/users/authors`
- **Метод:** `GET`
- **Параметры запроса:**
  - `skip`: int (пропустить количество записей, по умолчанию 0)
  - `limit`: int (ограничить количество записей, по умолчанию 20)
- **Ответ:** Список профилей авторов

### Получение закладок пользователя

Получение списка историй, добавленных в закладки текущим пользователем.

- **URL:** `/users/bookmarks`
- **Метод:** `GET`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Ответ:** Список историй, добавленных в закладки

## Истории

### Создание истории

Создание новой истории.

- **URL:** `/stories`
- **Метод:** `POST`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Тело запроса:**
  ```json
  {
    "title": "Название истории",
    "summary": "Краткое описание истории",
    "genre": "FICTION",
    "cover_image_url": "https://example.com/cover.jpg"
  }
  ```
- **Ответ:** Созданная история

### Получение списка историй

Получение списка историй с возможностью фильтрации и сортировки.

- **URL:** `/stories`
- **Метод:** `GET`
- **Параметры запроса:**
  - `skip`: int (пропустить количество записей, по умолчанию 0)
  - `limit`: int (ограничить количество записей, по умолчанию 20)
  - `genre`: string (фильтр по жанру)
  - `search`: string (поиск по названию)
  - `sort_by`: string (сортировка по полю: "rating", "views", "created_at")
- **Ответ:** Список историй и метаданные о пагинации

### Получение конкретной истории

Получение детальной информации об истории.

- **URL:** `/stories/{story_id}`
- **Метод:** `GET`
- **Ответ:** Детальная информация об истории

### Обновление истории

Обновление информации об истории.

- **URL:** `/stories/{story_id}`
- **Метод:** `PUT`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Тело запроса:**
  ```json
  {
    "title": "Новое название истории",
    "summary": "Обновленное описание истории",
    "genre": "MYSTERY"
  }
  ```
- **Ответ:** Обновленная информация об истории

### Удаление истории

Удаление истории.

- **URL:** `/stories/{story_id}`
- **Метод:** `DELETE`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Ответ:** Статус 204 No Content

### Получение историй для продолжения чтения

Получение списка историй, которые пользователь недавно читал.

- **URL:** `/stories/continue-reading`
- **Метод:** `GET`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Ответ:** Список историй для продолжения чтения

### Получение популярных историй

Получение списка популярных историй за последнюю неделю.

- **URL:** `/stories/popular`
- **Метод:** `GET`
- **Ответ:** Список популярных историй

## Главы

### Создание главы

Создание новой главы для истории.

- **URL:** `/chapters`
- **Метод:** `POST`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Тело запроса:**
  ```json
  {
    "title": "Название главы",
    "content": "Содержание главы",
    "chapter_number": 1,
    "story_id": 1
  }
  ```
- **Ответ:** Созданная глава

### Получение главы

Получение информации о конкретной главе.

- **URL:** `/chapters/{chapter_id}`
- **Метод:** `GET`
- **Ответ:** Информация о главе

### Обновление главы

Обновление информации о главе.

- **URL:** `/chapters/{chapter_id}`
- **Метод:** `PUT`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Тело запроса:**
  ```json
  {
    "title": "Новое название главы",
    "content": "Обновленное содержание главы"
  }
  ```
- **Ответ:** Обновленная информация о главе

### Удаление главы

Удаление главы.

- **URL:** `/chapters/{chapter_id}`
- **Метод:** `DELETE`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Ответ:** Статус 204 No Content

### Получение списка глав истории

Получение списка глав для конкретной истории.

- **URL:** `/chapters/story/{story_id}`
- **Метод:** `GET`
- **Ответ:** Список глав истории

## Социальные взаимодействия

### Создание комментария

Создание нового комментария к истории.

- **URL:** `/social/comments`
- **Метод:** `POST`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Тело запроса:**
  ```json
  {
    "content": "Текст комментария",
    "story_id": 1
  }
  ```
- **Ответ:** Созданный комментарий

### Получение комментариев к истории

Получение списка комментариев к истории.

- **URL:** `/social/comments/{story_id}`
- **Метод:** `GET`
- **Ответ:** Список комментариев

### Обновление комментария

Обновление содержания комментария.

- **URL:** `/social/comments/{comment_id}`
- **Метод:** `PUT`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Тело запроса:**
  ```json
  {
    "content": "Обновленный текст комментария"
  }
  ```
- **Ответ:** Обновленный комментарий

### Удаление комментария

Удаление комментария.

- **URL:** `/social/comments/{comment_id}`
- **Метод:** `DELETE`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Ответ:** Статус 204 No Content

### Добавление лайка

Добавление лайка к истории.

- **URL:** `/social/likes`
- **Метод:** `POST`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Тело запроса:**
  ```json
  {
    "story_id": 1
  }
  ```
- **Ответ:** Информация о добавленном лайке

### Удаление лайка

Удаление лайка с истории.

- **URL:** `/social/likes/{story_id}`
- **Метод:** `DELETE`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Ответ:** Статус 204 No Content

### Добавление закладки

Добавление истории в закладки.

- **URL:** `/social/bookmarks`
- **Метод:** `POST`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Тело запроса:**
  ```json
  {
    "story_id": 1,
    "last_read_chapter": 3
  }
  ```
- **Ответ:** Информация о добавленной закладке

### Обновление закладки

Обновление информации о закладке (например, последняя прочитанная глава).

- **URL:** `/social/bookmarks/{story_id}`
- **Метод:** `PUT`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Тело запроса:**
  ```json
  {
    "last_read_chapter": 5
  }
  ```
- **Ответ:** Обновленная информация о закладке

### Удаление закладки

Удаление истории из закладок.

- **URL:** `/social/bookmarks/{story_id}`
- **Метод:** `DELETE`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Ответ:** Статус 204 No Content

### Подписка на пользователя

Подписка на обновления другого пользователя.

- **URL:** `/social/follow`
- **Метод:** `POST`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Тело запроса:**
  ```json
  {
    "followed_id": 2
  }
  ```
- **Ответ:** Информация о подписке

### Отписка от пользователя

Отмена подписки на обновления пользователя.

- **URL:** `/social/unfollow/{user_id}`
- **Метод:** `DELETE`
- **Заголовки:** `Authorization: Bearer <access_token>`
- **Ответ:** Статус 204 No Content

### Получение списка подписчиков

Получение списка подписчиков пользователя.

- **URL:** `/social/followers/{user_id}`
- **Метод:** `GET`
- **Ответ:** Список подписчиков

### Получение списка подписок

Получение списка пользователей, на которых подписан указанный пользователь.

- **URL:** `/social/following/{user_id}`
- **Метод:** `GET`
- **Ответ:** Список подписок